<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<title>Reinstall - set_trace_func</title>

<!-- Meta -->
<meta name="description" content="Just a random coder writing about technology, web development, and various other geeky topics." />
<meta name="author" content="Jamie Macey">
<link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/index.xml" />

<!-- Favicons -->
<!-- 
<link rel="apple-touch-icon" href="/docs/5.2/assets/img/favicons/apple-touch-icon.png" sizes="180x180">
<link rel="icon" href="/docs/5.2/assets/img/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
<link rel="icon" href="/docs/5.2/assets/img/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
<link rel="manifest" href="/docs/5.2/assets/img/favicons/manifest.json">
<link rel="mask-icon" href="/docs/5.2/assets/img/favicons/safari-pinned-tab.svg" color="#712cf9">
<link rel="icon" href="/docs/5.2/assets/img/favicons/favicon.ico">
-->

<!-- Style -->
<link rel="stylesheet" href="/_bridgetown/static/index.J6BIDSPS.css" />

<!-- Script -->
<!-- <script src="/_bridgetown/static/index.PJZZ2K4I.js" defer></script> -->


    <link type="application/atom+xml" rel="alternate" href="https://blog.tracefunc.com/index.xml" title="set_trace_func" />
  </head>
  <body class="post ">
    <header>
  <nav>
    <ul>
      <li><h1><a href="/">set_trace_func</a></h1></li>
      <!-- The following float right, and are defined right-to-left -->
      <li class="float-right"><a href="/notes/">Notes</a></li>
      <li class="float-right"><a href="/projects/">Projects</a></li>
      <li class="float-right"><a href="/tags/">Tags</a></li>
      <li class="float-right"><a href="/archive/">Archive</a></li>
    </ul>
  </nav>
</header>


    <main>
      <aside>


<div>
  <h4>About</h4>
  <picture class="float-end w-50 rounded-circle">
    <source srcset="/assets/memoji.webp" type="image/webp">
    <source srcset="/assets/memoji.jpeg" type="image/jpeg">
    <img src="/assets/memoji.png" alt="Avatar of Author" loading="lazy" class="w-100">
  </picture>

  <p>Jamie Macey is a senior software engineer with over 15 years experience
            in the Ruby and Rails ecosystems, largely on the back-end.</p>
  <p class="mb-0">Husband, father, gamer, and all-around geek. Ask about my latest
            3d print, or toy software project.</p>
</div>

<div>
  <h4>Elsewhere</h4>
  <ol class="list-unstyled">
    <li>
      <a href="https://github.com/jamie/"">GitHub</a>
    </li>
    <li style="display: none;">
      <a rel="me" href="https://ruby.social/@jamie_ca">Mastodon</a>
    </li>
    <li>
      <a href="/static/jamie-macey/">Resume</a>
    </li>
    <li>
      <a href="https://www.linkedin.com/in/jamiemacey/">Linkedin</a>
    </li>
    <li>
      <a href="mailto:jamie.blog@tracefunc.com">Contact</a>
    </li>
  </ol>
</div>
</aside>

      <section>
  <article>
  <h2><a href="/2007/01/15/reinstall-html/">Reinstall</a></h2>
  <blockquote>
    15th Jan 2007
    
      | Tags:
      <a href="/tags/#linux">linux</a> 
    
  </blockquote>

  
    <p>I’m running Ubuntu 6.10 on my laptop, and a few weeks back the sound decided that it would just stop working. I finally got fed up enough with it to do a reinstall. I thought I’d try out the new beta for <a href="http://cdimage.ubuntu.com/releases/feisty/herd-2/">Feisty</a>, but the installer repeatedly froze on me at 63% on the install, so I gave up and put 6.10 back on. I try to keep tabs on what software I install as extras to ease reinstalls, and tweaked my reinstall scripts from last time to the final forms shown below.</p>

<p>After all this, I did manage to get sound up and running, and it even properly mixes now between <a href="http://www.sacredchao.net/quodlibet">Quod Libet</a>, Gaim, and Firefox/flash. So, total win. Also I got to remove some cruft from my install, and I should be able to get up and running quick when I upgrade to 7.04. No in-place upgrade this time.</p>

<p>This first script takes a custom sources.list (just edited to enable universe/multiverse from all sources, and add a few extras for jedit and some others) and copies it into place, and then installs a new kernel, shell, network manager, and graphics driver. It sets up the networking for WPA (which I use at home). Lastly, it installs a <a href="http://perso.orange.fr/apoirier/">special driver</a> for my video hardware, with an init-script to let my LCD run at native resolution. Fun times I had figuring that one out.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/sh</span>

<span class="c">#sudo cp /etc/apt/sources.list /etc/apt/sources.list.old</span>
<span class="c">#sudo cp sources.list /etc/apt/sources.list</span>
<span class="c">#sudo apt-get update</span>

<span class="c"># Environment</span>
<span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="se">\</span>
  build-essential zsh zsh-doc deborphan <span class="se">\</span>
  linux-image-686 linux-restricted-modules-686 <span class="se">\</span>
  nvidia-glx network-manager network-manager-gnome yakuake

<span class="c"># Get WPA networking set up</span>
<span class="nb">sudo echo </span>auto lo <span class="o">&gt;</span> /etc/network/interfaces
<span class="nb">sudo echo </span>iface lo inet loopback <span class="o">&gt;&gt;</span> /etc/network/interfaces
<span class="nb">sudo echo </span><span class="nv">ENABLED</span><span class="o">=</span>0 <span class="o">&gt;</span> /etc/default/wpasupplicant
<span class="nb">sudo</span> /etc/init.d/dbus restart

<span class="c"># Fix screen res</span>
<span class="nb">cd </span>855resolution
make clean
make
<span class="nb">sudo cp </span>855resolution /usr/sbin/855resolution
<span class="nb">sudo cp </span>855res /etc/init.d/855res
<span class="nb">sudo chmod </span>755 /etc/init.d/855res
<span class="nb">sudo </span>update-rc.d 855res defaults 19
<span class="nb">cd</span> ..

<span class="c"># Set shell</span>
<span class="nb">echo </span>Enter your password to <span class="nb">set </span>zsh as your default shell
chsh <span class="nt">-s</span> /usr/bin/zsh

<span class="nb">echo</span> <span class="s2">"</span><span class="se">\n\n\n\n\n\n</span><span class="s2">"</span>
<span class="nb">echo </span>Please reboot your system now to load the new kernel
<span class="nb">echo </span>and get X running at the correct resolution.
<span class="nb">echo</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>After rebooting for a real X (and most of my working environment set up), I run the second script, which is essentially just one big batch-install. Version control, database, Java, Ruby, RubyGems (manually), a bunch of a/v codecs for gstreamer, and then a handful of actual applications.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
</pre></td><td class="rouge-code"><pre><span class="c">#!/bin/sh</span>

<span class="c"># Development</span>
<span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="se">\</span>
  subversion svk darcs mercurial <span class="se">\</span>
  mysql-client mysql-server sqlite3 sqlite3-doc sun-java5-jre <span class="se">\</span>
    sun-java5-plugin ia32-sun-java5-plugin sun-java5-fonts <span class="se">\</span>
    ttf-sazanami-gothic ttf-sazanami-mincho <span class="se">\</span>
  ruby1.8 ruby1.8-dev rdoc1.8 ri1.8 irb1.8 libyaml-ruby <span class="se">\</span>
  libzlib-ruby libmysql-ruby librmagick-ruby libgd-ruby1.8

<span class="c"># Rubygems</span>
wget http://rubyforge.org/frs/download.php/5207/rubygems-0.8.11.tgz
<span class="nb">tar </span>xzvf rubygems-0.8.11.tgz
<span class="nb">cd </span>rubygems-0.8.11
<span class="nb">sudo </span>ruby setup.rb
<span class="nb">cd</span> ..
<span class="nb">rm</span> <span class="nt">-rf</span> rubygems-0.8.11
<span class="nb">rm </span>rubygems-0.8.11.tgz
<span class="nb">sudo </span>gem update <span class="nt">--system</span>
<span class="nb">sudo </span>gem <span class="nb">install </span>rails camping nitro

<span class="c"># Multimedia/Entertainment</span>
<span class="c">#  lame libdvdcss2</span>
<span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="se">\</span>
  alsa-oss vorbis-tools gstreamer0.10-ffmpeg <span class="se">\</span>
  gstreamer0.10-plugins-bad gstreamer0.10-plugins-bad-multiverse <span class="se">\</span>
  gstreamer0.10-plugins-ugly gstreamer0.10-plugins-ugly-multiverse <span class="se">\</span>
  flashplayer-mozilla unrar unace p7zip <span class="se">\</span>
  msttcorefonts gsfonts-x11 xfonts-intl-european
<span class="nb">sudo </span>fc-cache <span class="nt">-f</span> <span class="nt">-v</span> <span class="c"># reload font cache</span>

<span class="c"># Apps</span>
<span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="se">\</span>
  quodlibet quodlibet-plugins quodlibet-ext <span class="se">\</span>
  gnugo quarry wine jedit gnucash gnucash-docs

<span class="nb">echo</span> <span class="s2">"</span><span class="se">\n\n\n\n\n\n</span><span class="s2">"</span>
<span class="nb">echo </span>Please edit /etc/firefox/firefoxrc and change <span class="se">\"</span>none<span class="se">\"</span> to <span class="se">\"</span>aoss<span class="se">\"</span>
<span class="nb">echo</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h1 id="comments">Comments</h1>

<p>Wow, way more complicated than my installation process: http://dev.technomancy.us/phil/wiki/UbuntuInstallation</p>

<p>The most annoying part for me is grabbing all those firefox extensions since it’s not easy to script. I’ve got fiesty herd 3 on my laptop, and it’s working fine–better suspend than I got with edgy. But it’s always hit-or-miss with these prereleases.</p>

<ul>
  <li>Phil Hagelberg, at 10:51, Feb 20 2007</li>
</ul>


  
</article>

</section>

<nav aria-label="Pagination">
  <ul>
    
    <li>
      <a href="/2007/01/09/upgrading-to-1-2-part-1-deprecations-html/">
        &laquo; Upgrading to 1.2, Part 1: Deprecations
      </a>
    </li>
    
    
    <li class="float-right">
      <a href="/2007/01/23/test-timing-html/">
        Test Timing &raquo;
      </a>
    </li>
    
  </ul>
</nav>

    </main>

    <footer>
  <p>Styled with <a href="https://classless.de/">Classless.css</a>.</p>
</footer>


    <script data-goatcounter="https://tracefunc.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
  </body>

</html>

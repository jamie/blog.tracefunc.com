<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang='en' xml:lang='en' xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <title>set_trace_func ~ Reinstall</title>
    <meta content='text/html; charset=utf-8' http-equiv='content-type' />
    <link rel="stylesheet" href="/css/blueprint.css" type="text/css"/>
    <!--[if IE]> 
      <link rel="stylesheet" href="/css/blueprint-ie.css" type="text/css"/>
    <![endif]-->
    <link rel="stylesheet" href="/css/master.css" type="text/css"/>
    <link href='http://feeds.feedburner.com/set_trace_func' rel='alternate' type='application/atom+xml' />
    <script type='text/javascript' src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"></script>
    <script type='text/javascript' src="/js/prettify.js"></script>
    <script type='text/javascript' src="/js/blog.js"></script>
  </head>
  <body>
    <div class='container'>
      <div class='span-20 last' id='header'>
        <h1>
          <a href='/'>set_trace_func</a>
        </h1>
        <h2>veni, vidi, didici</h2>
      </div>
      <div class='span-20 last' id='menu'>
        <div id='feedburner'>
          <a href='http://feeds.feedburner.com/set_trace_func'>
            <img alt='RSS Feed' src='http://feeds.feedburner.com/~fc/set_trace_func?bg=0099ff&amp;fg=000000&amp;anim=0' />
          </a>
        </div>
        <ul style='float: right;'>
          <li>
            <a>&#8203;</a>
          </li>
          <li>
            <a href='/about.html'>About Me</a>
          </li>
        </ul>
        <ul>
          <li>
            <a href='/archive.html'>Archive</a>
          </li>
          <li>
            <a href='/tags.html'>Tags</a>
          </li>
          <li>
            <a href='/projects.html'>Projects</a>
          </li>
        </ul>
      </div>
      <div id='content-wrap'>
        <div class='span-18' id='content'>
          <div id='article'>
            <div class='article hentry'>
              <!-- %h3.entry-title{:rel => 'bookmark'}= link_to_page(@page) -->
              <h3 class='entry-title'><a href="/2007/01/15/reinstall">Reinstall</a></h3>
              <div class='entry-content'>
                <p>I'm running Ubuntu 6.10 on my laptop, and a few weeks back the sound decided that it would just stop working. I finally got fed up enough with it to do a reinstall. I thought I'd try out the new beta for <a href="http://cdimage.ubuntu.com/releases/feisty/herd-2/">Feisty</a>, but the installer repeatedly froze on me at 63% on the install, so I gave up and put 6.10 back on. I try to keep tabs on what software I install as extras to ease reinstalls, and tweaked my reinstall scripts from last time to the final forms shown below.</p>
                
                <p>After all this, I did manage to get sound up and running, and it even properly mixes now between <a href="http://www.sacredchao.net/quodlibet">Quod Libet</a>, Gaim, and Firefox/flash. So, total win. Also I got to remove some cruft from my install, and I should be able to get up and running quick when I upgrade to 7.04. No in-place upgrade this time.</p>
                
                <p>This first script takes a custom sources.list (just edited to enable universe/multiverse from all sources, and add a few extras for jedit and some others) and copies it into place, and then installs a new kernel, shell, network manager, and graphics driver. It sets up the networking for WPA (which I use at home). Lastly, it installs a <a href="http://perso.orange.fr/apoirier/">special driver</a> for my video hardware, with an init-script to let my LCD run at native resolution. Fun times I had figuring that one out.</p>
                
                <pre><code>#!/bin/sh&#x000A;&#x000A;#sudo cp /etc/apt/sources.list /etc/apt/sources.list.old&#x000A;#sudo cp sources.list /etc/apt/sources.list&#x000A;#sudo apt-get update&#x000A;&#x000A;# Environment&#x000A;sudo apt-get install \&#x000A;  build-essential zsh zsh-doc deborphan \&#x000A;  linux-image-686 linux-restricted-modules-686 \&#x000A;  nvidia-glx network-manager network-manager-gnome yakuake&#x000A;&#x000A;# Get WPA networking set up&#x000A;sudo echo auto lo &gt; /etc/network/interfaces&#x000A;sudo echo iface lo inet loopback &gt;&gt; /etc/network/interfaces&#x000A;sudo echo ENABLED=0 &gt; /etc/default/wpasupplicant&#x000A;sudo /etc/init.d/dbus restart&#x000A;&#x000A;# Fix screen res&#x000A;cd 855resolution&#x000A;make clean&#x000A;make&#x000A;sudo cp 855resolution /usr/sbin/855resolution&#x000A;sudo cp 855res /etc/init.d/855res&#x000A;sudo chmod 755 /etc/init.d/855res&#x000A;sudo update-rc.d 855res defaults 19&#x000A;cd ..&#x000A;&#x000A;# Set shell&#x000A;echo Enter your password to set zsh as your default shell&#x000A;chsh -s /usr/bin/zsh&#x000A;&#x000A;echo "\n\n\n\n\n\n"&#x000A;echo Please reboot your system now to load the new kernel&#x000A;echo and get X running at the correct resolution.&#x000A;echo&#x000A;</code></pre>
                
                <p>After rebooting for a real X (and most of my working environment set up), I run the second script, which is essentially just one big batch-install. Version control, database, Java, Ruby, RubyGems (manually), a bunch of a/v codecs for gstreamer, and then a handful of actual applications.</p>
                
                <pre><code>#!/bin/sh&#x000A;&#x000A;# Development&#x000A;sudo apt-get install \&#x000A;  subversion svk darcs mercurial \&#x000A;  mysql-client mysql-server sqlite3 sqlite3-doc sun-java5-jre \&#x000A;    sun-java5-plugin ia32-sun-java5-plugin sun-java5-fonts \&#x000A;    ttf-sazanami-gothic ttf-sazanami-mincho \&#x000A;  ruby1.8 ruby1.8-dev rdoc1.8 ri1.8 irb1.8 libyaml-ruby \&#x000A;  libzlib-ruby libmysql-ruby librmagick-ruby libgd-ruby1.8&#x000A;&#x000A;# Rubygems&#x000A;wget http://rubyforge.org/frs/download.php/5207/rubygems-0.8.11.tgz&#x000A;tar xzvf rubygems-0.8.11.tgz&#x000A;cd rubygems-0.8.11&#x000A;sudo ruby setup.rb&#x000A;cd ..&#x000A;rm -rf rubygems-0.8.11&#x000A;rm rubygems-0.8.11.tgz&#x000A;sudo gem update --system&#x000A;sudo gem install rails camping nitro&#x000A;&#x000A;# Multimedia/Entertainment&#x000A;#  lame libdvdcss2&#x000A;sudo apt-get install \&#x000A;  alsa-oss vorbis-tools gstreamer0.10-ffmpeg \&#x000A;  gstreamer0.10-plugins-bad gstreamer0.10-plugins-bad-multiverse \&#x000A;  gstreamer0.10-plugins-ugly gstreamer0.10-plugins-ugly-multiverse \&#x000A;  flashplayer-mozilla unrar unace p7zip \&#x000A;  msttcorefonts gsfonts-x11 xfonts-intl-european&#x000A;sudo fc-cache -f -v # reload font cache&#x000A;&#x000A;# Apps&#x000A;sudo apt-get install \&#x000A;  quodlibet quodlibet-plugins quodlibet-ext \&#x000A;  gnugo quarry wine jedit gnucash gnucash-docs&#x000A;&#x000A;echo "\n\n\n\n\n\n"&#x000A;echo Please edit /etc/firefox/firefoxrc and change \"none\" to \"aoss\"&#x000A;echo&#x000A;</code></pre>
                
                <h1>Comments</h1>
                
                <p>Wow, way more complicated than my installation process: http://dev.technomancy.us/phil/wiki/UbuntuInstallation</p>
                
                <p>The most annoying part for me is grabbing all those firefox extensions since it's not easy to script. I've got fiesty herd 3 on my laptop, and it's working fine--better suspend than I got with edgy. But it's always hit-or-miss with these prereleases.</p>
                
                <ul>
                <li>Phil Hagelberg, at 10:51, Feb 20 2007</li>
                </ul>
              </div>
              <div class='footer'>
                <abbr class="published date" title="2007-01-15T18:14:00-04:00">Jan 15, 2007 at 18:14</abbr>
                &nbsp; | &nbsp; tagged:
                <a href="/tags.html#linux">linux</a>
              </div>
            </div>
            <div id='disqus_thread'></div>
            <script src='http://disqus.com/forums/tracefunc/embed.js' type='text/javascript'></script>
            <noscript>
              <a href='http://tracefunc.disqus.com/?url=ref'>View the discussion thread.</a>
            </noscript>
            <a class='dsq-brlink' href='http://disqus.com'>blog comments powered by <span class="logo-disqus">Disqus</span></a>
          </div>
        </div>
      </div>
      <div class='span-20 last' id='footer'>
        <p>
          &copy; 2006-2008 <span class="author vcard"><span class="fn">Jamie Macey</span></span>
          |
          Original design: <a href="http://www.styleshout.com/templates/preview/CoolWater1-0/index.html">CoolWater</a> by <a href="http://www.styleshout.com/">styleshout</a>
        </p>
      </div>
    </div>
  </body>
</html>
